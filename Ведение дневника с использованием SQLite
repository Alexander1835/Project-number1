import sqlite3
from datetime import datetime

class DiaryApp:
    def init(self):
        # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
        self.conn = sqlite3.connect("diary.db")
        self.cursor = self.conn.cursor()
        self.create_table()

    def create_table(self):
        """–°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è –∑–∞–ø–∏—Å–µ–π –¥–Ω–µ–≤–Ω–∏–∫–∞."""
        try:
            self.cursor.execute("""
                CREATE TABLE IF NOT EXISTS entries (
                    id INTEGER PRIMARY KEY AUTOINCREMENT,
                    date TEXT NOT NULL,
                    content TEXT NOT NULL
                )
            """)
            self.conn.commit()
        except sqlite3.Error as e:
            print(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ç–∞–±–ª–∏—Ü—ã: {e}")

    def add_entry(self, content):
        """–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π –∑–∞–ø–∏—Å–∏ –≤ –¥–Ω–µ–≤–Ω–∏–∫."""
        try:
            date = datetime.now().strftime("%Y-%m-%d %H:%M:%S")
            self.cursor.execute("INSERT INTO entries (date, content) VALUES (?, ?)", (date, content))
            self.conn.commit()
            print("–ó–∞–ø–∏—Å—å —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∞!")
        except sqlite3.Error as e:
            print(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –∑–∞–ø–∏—Å–∏: {e}")

    def show_entries(self):
        """–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤—Å–µ—Ö –∑–∞–ø–∏—Å–µ–π –¥–Ω–µ–≤–Ω–∏–∫–∞."""
        try:
            self.cursor.execute("SELECT date, content FROM entries ORDER BY date DESC")
            entries = self.cursor.fetchall()
            if entries:
                print("\n–í–∞—à–∏ –∑–∞–ø–∏—Å–∏:")
                for entry in entries:
                    print(f"–î–∞—Ç–∞: {entry[0]}")
                    print(f"–ó–∞–ø–∏—Å—å: {entry[1]}")
                    print("-" * 30)
            else:
                print("–í –¥–Ω–µ–≤–Ω–∏–∫–µ –ø–æ–∫–∞ –Ω–µ—Ç –∑–∞–ø–∏—Å–µ–π.")
        except sqlite3.Error as e:
            print(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∑–∞–ø–∏—Å–µ–π: {e}")

    def close(self):
        """–ó–∞–∫—Ä—ã—Ç–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö."""
        self.conn.close()

def main():
    app = DiaryApp()
    print("–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ '–õ–∏—á–Ω—ã–π –¥–Ω–µ–≤–Ω–∏–∫'! üìì")

    while True:
        print("\n–ú–µ–Ω—é:")
        print("1. –ü–æ–∫–∞–∑–∞—Ç—å –∑–∞–ø–∏—Å–∏")
        print("2. –î–æ–±–∞–≤–∏—Ç—å –∑–∞–ø–∏—Å—å")
        print("3. –í—ã–π—Ç–∏")
        choice = input("–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ (1/2/3): ")

        if choice == "1":
            app.show_entries()
        elif choice == "2":
            content = input("–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –∑–∞–ø–∏—Å–∏: ")
            app.add_entry(content)
        elif choice == "3":
            app.close()
            print("–î–æ —Å–≤–∏–¥–∞–Ω–∏—è! üëã")
            break
        else:
            print("–ù–µ–≤–µ—Ä–Ω—ã–π –≤—ã–±–æ—Ä, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.")

if name == "main":
    main()
